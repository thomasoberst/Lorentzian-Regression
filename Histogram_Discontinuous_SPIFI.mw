<?xml version="1.0" encoding="UTF-8"?>
<Worksheet><Version major="6" minor="1"/><View-Properties><Zoom percentage="100"/></View-Properties><Styles><Layout alignment="left" bullet="none" firstindent="0.0" leftmargin="0.0" linebreak="space" linespacing="0.0" name="Normal" rightmargin="0.0" spaceabove="0.0" spacebelow="0.0"/><Font background="[0,0,0]" bold="true" executable="true" family="Monospaced" foreground="[255,0,0]" name="Maple Input" opaque="false" size="12"/><Font background="[0,0,0]" bold="false" executable="false" family="Times New Roman" foreground="[0,0,0]" italic="false" name="Text" opaque="false" size="12" underline="false"/></Styles><Group><Input><Text-field layout="Normal" style="Text">This procedure, <Font italic="true">HistDiscont(XBins, YBins, RemoveBins)</Font>, takes the arrays <Font italic="true">XBins</Font> and <Font italic="true">YBins</Font> of a SPIFI spectrum, which have already had the bins in the list <Font italic="true">RemoveBins</Font> removed. I.e., XBins data points may not be equally spaced. It outputs the global variable <Font italic="true">histdiscont</Font>, which is a list of Line Plot Structures which make up the histogram of the given SPIFI spectrum. To see the histogram, one must subsequently use the display() command with <Font italic="true">histdiscont</Font> as an argument. This procedure requires loading the with(plots) and with(plottools) packages.</Text-field></Input></Group><Group><Input><Text-field layout="Normal" prompt="&gt; " style="Maple Input">HistDiscont:=proc(Xdata,Ydata)</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">local Numbins, StandardBinlength, Endpoints, Binlines, Binlengths, i: global Histogram:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Histogram:=[]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Numbins:=nops(Xdata):</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">for i from 1 to nops(Xdata)-1 do</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Binlengths[i]:=abs(Xdata[i]-Xdata[i+1]): end do:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">StandardBinlength:=min(describe[mode](convert(Binlengths,list))):</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Endpoints[1]:=[Xdata[1]+StandardBinlength/2,Ydata[1]]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Endpoints[2*Numbins]:=[Xdata[Numbins]-StandardBinlength/2,Ydata[Numbins]]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">for i from 1 to Numbins-1 do</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">if (StandardBinlength-0.65*StandardBinlength) &lt; Binlengths[i] and</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input"><Font italic="false" underline="false">Binlengths[i] &lt; (StandardBinlength+0.65*StandardBinlength) then</Font></Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Endpoints[2*i]:=[Xdata[i]-Binlengths[i]/2,Ydata[i]]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Endpoints[2*i+1]:=[Xdata[i+1]+Binlengths[i]/2,Ydata[i+1]]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">else</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Endpoints[2*i]:=[Xdata[i]-StandardBinlength/2,Ydata[i]]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Endpoints[2*i+1]:=[Xdata[i+1]+StandardBinlength/2,Ydata[i+1]]:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">end if: end do:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">for i from 0 to Numbins-1 do</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Binlines[2*i+1]:=line(Endpoints[2*i+1],Endpoints[2*i+2]):</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">end do:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">for i from 1 to Numbins-1 do</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input"><Font italic="false" underline="false">if (StandardBinlength-0.65*StandardBinlength) &lt; Binlengths[i] and Binlengths[i] &lt; (StandardBinlength+0.5*StandardBinlength) then</Font></Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Binlines[2*i]:=line(Endpoints[2*i],Endpoints[2*i+1]):</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">end if: end do:</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">Histogram:=convert(Binlines,list):</Text-field><Text-field layout="Normal" prompt="&gt; " style="Maple Input">end proc:</Text-field></Input></Group><Group><Input><Text-field layout="Normal" prompt="&gt; " style="Maple Input"/></Input></Group><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/><Text-field/></Worksheet>